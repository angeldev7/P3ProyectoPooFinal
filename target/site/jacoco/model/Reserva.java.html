<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Reserva.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">P3ProyectoPooFinal</a> &gt; <a href="index.source.html" class="el_package">model</a> &gt; <span class="el_source">Reserva.java</span></div><h1>Reserva.java</h1><pre class="source lang-java linenums">package model;

import org.bson.Document;
import java.util.Date;

/**
 * Entidad Reserva que representa una reserva de habitación.
 * Maneja las fechas de ingreso y salida, así como el total de la reserva.
 * 
 * @author asdw
 * @version 1.0
 */
public class Reserva {
    private String id;
    private String idCliente;
    private String idHabitacion;
    private Date fechaIngreso;
    private Date fechaSalida;
    private double total;
    private String observaciones;
    private boolean confirmada;

    /**
     * Constructor por defecto.
     */
<span class="nc" id="L26">    public Reserva() {}</span>

    /**
     * Constructor básico para crear una reserva.
     * 
     * @param id Identificador único de la reserva
     * @param idCliente ID del cliente que realiza la reserva
     * @param idHabitacion ID de la habitación reservada
     * @param fechaIngreso Fecha de ingreso al hotel
     * @param fechaSalida Fecha de salida del hotel (puede ser null para reservas activas)
     * @param total Monto total de la reserva
     */
<span class="fc" id="L38">    public Reserva(String id, String idCliente, String idHabitacion, Date fechaIngreso, Date fechaSalida, double total) {</span>
<span class="fc" id="L39">        this.id = id;</span>
<span class="fc" id="L40">        this.idCliente = idCliente;</span>
<span class="fc" id="L41">        this.idHabitacion = idHabitacion;</span>
<span class="fc" id="L42">        this.fechaIngreso = fechaIngreso;</span>
<span class="fc" id="L43">        this.fechaSalida = fechaSalida;</span>
<span class="fc" id="L44">        this.total = total;</span>
<span class="fc" id="L45">        this.observaciones = &quot;&quot;;</span>
<span class="fc" id="L46">        this.confirmada = true;</span>
<span class="fc" id="L47">    }</span>

    /**
     * Constructor completo para crear una reserva con todos los atributos.
     * 
     * @param id Identificador único de la reserva
     * @param idCliente ID del cliente que realiza la reserva
     * @param idHabitacion ID de la habitación reservada
     * @param fechaIngreso Fecha de ingreso al hotel
     * @param fechaSalida Fecha de salida del hotel
     * @param total Monto total de la reserva
     * @param observaciones Observaciones adicionales
     * @param confirmada Estado de confirmación de la reserva
     */
    public Reserva(String id, String idCliente, String idHabitacion, Date fechaIngreso, 
<span class="fc" id="L62">                   Date fechaSalida, double total, String observaciones, boolean confirmada) {</span>
<span class="fc" id="L63">        this.id = id;</span>
<span class="fc" id="L64">        this.idCliente = idCliente;</span>
<span class="fc" id="L65">        this.idHabitacion = idHabitacion;</span>
<span class="fc" id="L66">        this.fechaIngreso = fechaIngreso;</span>
<span class="fc" id="L67">        this.fechaSalida = fechaSalida;</span>
<span class="fc" id="L68">        this.total = total;</span>
<span class="fc" id="L69">        this.observaciones = observaciones;</span>
<span class="fc" id="L70">        this.confirmada = confirmada;</span>
<span class="fc" id="L71">    }</span>

    // Getters y setters
<span class="fc" id="L74">    public String getId() { return id; }</span>
<span class="fc" id="L75">    public void setId(String id) { this.id = id; }</span>
<span class="fc" id="L76">    public String getIdCliente() { return idCliente; }</span>
<span class="nc" id="L77">    public void setIdCliente(String idCliente) { this.idCliente = idCliente; }</span>
<span class="fc" id="L78">    public String getIdHabitacion() { return idHabitacion; }</span>
<span class="nc" id="L79">    public void setIdHabitacion(String idHabitacion) { this.idHabitacion = idHabitacion; }</span>
<span class="fc" id="L80">    public Date getFechaIngreso() { return fechaIngreso; }</span>
<span class="nc" id="L81">    public void setFechaIngreso(Date fechaIngreso) { this.fechaIngreso = fechaIngreso; }</span>
<span class="fc" id="L82">    public Date getFechaSalida() { return fechaSalida; }</span>
<span class="fc" id="L83">    public void setFechaSalida(Date fechaSalida) { this.fechaSalida = fechaSalida; }</span>
<span class="fc" id="L84">    public double getTotal() { return total; }</span>
<span class="nc" id="L85">    public void setTotal(double total) { this.total = total; }</span>
<span class="fc" id="L86">    public String getObservaciones() { return observaciones; }</span>
<span class="fc" id="L87">    public void setObservaciones(String observaciones) { this.observaciones = observaciones; }</span>
<span class="fc" id="L88">    public boolean isConfirmada() { return confirmada; }</span>
<span class="fc" id="L89">    public void setConfirmada(boolean confirmada) { this.confirmada = confirmada; }</span>

    /**
     * Convierte la reserva a un Document de MongoDB.
     * 
     * @return Document para insertar en MongoDB
     */
    public Document toDocument() {
<span class="fc" id="L97">        return new Document(&quot;_id&quot;, id)</span>
<span class="fc" id="L98">                .append(&quot;idCliente&quot;, idCliente)</span>
<span class="fc" id="L99">                .append(&quot;idHabitacion&quot;, idHabitacion)</span>
<span class="fc" id="L100">                .append(&quot;fechaIngreso&quot;, fechaIngreso)</span>
<span class="fc" id="L101">                .append(&quot;fechaSalida&quot;, fechaSalida)</span>
<span class="fc" id="L102">                .append(&quot;total&quot;, total)</span>
<span class="fc" id="L103">                .append(&quot;observaciones&quot;, observaciones)</span>
<span class="fc" id="L104">                .append(&quot;confirmada&quot;, confirmada);</span>
    }

    /**
     * Crea una Reserva desde un Document de MongoDB.
     * 
     * @param doc Document obtenido de MongoDB
     * @return Nueva instancia de Reserva
     */
    public static Reserva fromDocument(Document doc) {
<span class="fc" id="L114">        return new Reserva(</span>
<span class="fc" id="L115">            doc.getString(&quot;_id&quot;),</span>
<span class="fc" id="L116">            doc.getString(&quot;idCliente&quot;),</span>
<span class="fc" id="L117">            doc.getString(&quot;idHabitacion&quot;),</span>
<span class="fc" id="L118">            doc.getDate(&quot;fechaIngreso&quot;),</span>
<span class="fc" id="L119">            doc.getDate(&quot;fechaSalida&quot;),</span>
<span class="fc bfc" id="L120" title="All 2 branches covered.">            doc.getDouble(&quot;total&quot;) != null ? doc.getDouble(&quot;total&quot;) : 0.0,</span>
<span class="fc bfc" id="L121" title="All 2 branches covered.">            doc.getString(&quot;observaciones&quot;) != null ? doc.getString(&quot;observaciones&quot;) : &quot;&quot;,</span>
<span class="fc" id="L122">            doc.getBoolean(&quot;confirmada&quot;, true)</span>
        );
    }

    /**
     * Verifica si la reserva está activa (sin fecha de salida).
     * 
     * @return true si la reserva está activa, false en caso contrario
     */
    public boolean isActiva() {
<span class="fc bfc" id="L132" title="All 4 branches covered.">        return fechaSalida == null &amp;&amp; confirmada;</span>
    }

    /**
     * Finaliza la reserva estableciendo la fecha de salida.
     */
    public void finalizar() {
<span class="fc" id="L139">        this.fechaSalida = new Date();</span>
<span class="fc" id="L140">    }</span>

    @Override
    public String toString() {
<span class="nc" id="L144">        return &quot;Reserva{&quot; +</span>
                &quot;id='&quot; + id + '\'' +
                &quot;, idCliente='&quot; + idCliente + '\'' +
                &quot;, idHabitacion='&quot; + idHabitacion + '\'' +
                &quot;, fechaIngreso=&quot; + fechaIngreso +
                &quot;, fechaSalida=&quot; + fechaSalida +
                &quot;, total=&quot; + total +
                &quot;, observaciones='&quot; + observaciones + '\'' +
                &quot;, confirmada=&quot; + confirmada +
                '}';
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>