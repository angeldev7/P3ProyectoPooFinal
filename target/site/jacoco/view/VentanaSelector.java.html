<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>VentanaSelector.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">P3ProyectoPooFinal</a> &gt; <a href="index.source.html" class="el_package">view</a> &gt; <span class="el_source">VentanaSelector.java</span></div><h1>VentanaSelector.java</h1><pre class="source lang-java linenums">package view;

import controller.ControladorVentanaPrincipal;
import controller.ControladorVentanaAdmin;
import model.*;
import command.*;
import singleton.GestorDisponibilidad;
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * Ventana de selecci贸n de interfaz del sistema hotelero.
 * Permite elegir entre la interfaz tradicional y la nueva interfaz de administraci贸n.
 * 
 * @author asdw
 * @version 1.0
 */
public class VentanaSelector extends JFrame {
    
<span class="nc" id="L22">    private static final Color BACKGROUND_COLOR = new Color(240, 242, 247);</span>
<span class="nc" id="L23">    private static final Color CARD_COLOR = Color.WHITE;</span>
<span class="nc" id="L24">    private static final Color ACCENT_COLOR = new Color(72, 126, 176);</span>
<span class="nc" id="L25">    private static final Color TEXT_COLOR = new Color(52, 58, 76);</span>
<span class="nc" id="L26">    private static final Color SUCCESS_COLOR = new Color(76, 175, 80);</span>
    
    // Dependencias del sistema
    private final IModeloService modeloService;
    private final ICommandInvoker commandInvoker;
    private final GestorDisponibilidad gestorDisponibilidad;
    
<span class="nc" id="L33">    private static final java.util.logging.Logger logger = </span>
<span class="nc" id="L34">        java.util.logging.Logger.getLogger(VentanaSelector.class.getName());</span>

    /**
     * Constructor con inyecci贸n de dependencias.
     */
<span class="nc" id="L39">    public VentanaSelector(IModeloService modeloService, ICommandInvoker commandInvoker, </span>
                          GestorDisponibilidad gestorDisponibilidad) {
<span class="nc" id="L41">        this.modeloService = modeloService;</span>
<span class="nc" id="L42">        this.commandInvoker = commandInvoker;</span>
<span class="nc" id="L43">        this.gestorDisponibilidad = gestorDisponibilidad;</span>
        
<span class="nc" id="L45">        initComponents();</span>
<span class="nc" id="L46">        setupUI();</span>
<span class="nc" id="L47">    }</span>
    
    /**
     * Inicializa los componentes de la interfaz.
     */
    private void initComponents() {
<span class="nc" id="L53">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L54">        setTitle(&quot;Sistema de Gesti贸n Hotelera - Seleccionar Interfaz&quot;);</span>
<span class="nc" id="L55">        setSize(600, 400);</span>
<span class="nc" id="L56">        setLocationRelativeTo(null);</span>
<span class="nc" id="L57">        setResizable(false);</span>
        
        // Configurar layout principal
<span class="nc" id="L60">        getContentPane().setBackground(BACKGROUND_COLOR);</span>
<span class="nc" id="L61">        setLayout(new BorderLayout());</span>
        
        // Header
<span class="nc" id="L64">        JPanel headerPanel = createHeader();</span>
<span class="nc" id="L65">        add(headerPanel, BorderLayout.NORTH);</span>
        
        // Content
<span class="nc" id="L68">        JPanel contentPanel = createContent();</span>
<span class="nc" id="L69">        add(contentPanel, BorderLayout.CENTER);</span>
        
        // Footer
<span class="nc" id="L72">        JPanel footerPanel = createFooter();</span>
<span class="nc" id="L73">        add(footerPanel, BorderLayout.SOUTH);</span>
<span class="nc" id="L74">    }</span>
    
    /**
     * Crea el panel del header.
     */
    private JPanel createHeader() {
<span class="nc" id="L80">        JPanel header = new JPanel();</span>
<span class="nc" id="L81">        header.setBackground(ACCENT_COLOR);</span>
<span class="nc" id="L82">        header.setPreferredSize(new Dimension(600, 80));</span>
<span class="nc" id="L83">        header.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));</span>
        
<span class="nc" id="L85">        JLabel titleLabel = new JLabel(&quot; Sistema de Gesti贸n Hotelera&quot;, SwingConstants.CENTER);</span>
<span class="nc" id="L86">        titleLabel.setFont(new Font(&quot;Segoe UI&quot;, Font.BOLD, 24));</span>
<span class="nc" id="L87">        titleLabel.setForeground(Color.WHITE);</span>
        
<span class="nc" id="L89">        header.setLayout(new BorderLayout());</span>
<span class="nc" id="L90">        header.add(titleLabel, BorderLayout.CENTER);</span>
        
<span class="nc" id="L92">        return header;</span>
    }
    
    /**
     * Crea el panel de contenido con las opciones.
     */
    private JPanel createContent() {
<span class="nc" id="L99">        JPanel content = new JPanel(new GridBagLayout());</span>
<span class="nc" id="L100">        content.setBackground(BACKGROUND_COLOR);</span>
<span class="nc" id="L101">        content.setBorder(BorderFactory.createEmptyBorder(30, 30, 30, 30));</span>
        
<span class="nc" id="L103">        GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L104">        gbc.insets = new Insets(20, 20, 20, 20);</span>
<span class="nc" id="L105">        gbc.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L106">        gbc.weightx = 1.0;</span>
<span class="nc" id="L107">        gbc.weighty = 1.0;</span>
        
        // Tarjeta interfaz tradicional
<span class="nc" id="L110">        gbc.gridx = 0;</span>
<span class="nc" id="L111">        gbc.gridy = 0;</span>
<span class="nc" id="L112">        JPanel tradicionCard = createInterfaceCard(</span>
<span class="nc" id="L113">            &quot;Check-in&quot;,</span>
<span class="nc" id="L114">            &quot;Vista cl谩sica con formularios\ny tablas est谩ndar&quot;,</span>
<span class="nc" id="L115">            &quot;&quot;,</span>
<span class="nc" id="L116">            () -&gt; abrirInterfazTradicional()</span>
        );
<span class="nc" id="L118">        content.add(tradicionCard, gbc);</span>
        
        // Tarjeta nueva interfaz admin
<span class="nc" id="L121">        gbc.gridx = 1;</span>
<span class="nc" id="L122">        gbc.gridy = 0;</span>
<span class="nc" id="L123">        JPanel adminCard = createInterfaceCard(</span>
<span class="nc" id="L124">            &quot;Panel de Administraci贸n&quot;,</span>
<span class="nc" id="L125">            &quot;Dashboard moderno con\nan谩lisis y navegaci贸n avanzada&quot;,</span>
<span class="nc" id="L126">            &quot;&quot;,</span>
<span class="nc" id="L127">            () -&gt; abrirInterfazAdmin()</span>
        );
<span class="nc" id="L129">        content.add(adminCard, gbc);</span>
        
<span class="nc" id="L131">        return content;</span>
    }
    
    /**
     * Crea una tarjeta de selecci贸n de interfaz.
     */
    private JPanel createInterfaceCard(String title, String description, String icon, Runnable action) {
<span class="nc" id="L138">        JPanel card = new JPanel();</span>
<span class="nc" id="L139">        card.setLayout(new BoxLayout(card, BoxLayout.Y_AXIS));</span>
<span class="nc" id="L140">        card.setBackground(CARD_COLOR);</span>
<span class="nc" id="L141">        card.setBorder(BorderFactory.createCompoundBorder(</span>
<span class="nc" id="L142">            BorderFactory.createLineBorder(new Color(230, 230, 230), 1),</span>
<span class="nc" id="L143">            BorderFactory.createEmptyBorder(30, 20, 30, 20)</span>
        ));
<span class="nc" id="L145">        card.setCursor(new Cursor(Cursor.HAND_CURSOR));</span>
        
        // Icono
<span class="nc" id="L148">        JLabel iconLabel = new JLabel(icon, SwingConstants.CENTER);</span>
<span class="nc" id="L149">        iconLabel.setFont(new Font(&quot;Segoe UI Emoji&quot;, Font.PLAIN, 48));</span>
<span class="nc" id="L150">        iconLabel.setAlignmentX(Component.CENTER_ALIGNMENT);</span>
        
        // T铆tulo
<span class="nc" id="L153">        JLabel titleLabel = new JLabel(title, SwingConstants.CENTER);</span>
<span class="nc" id="L154">        titleLabel.setFont(new Font(&quot;Segoe UI&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L155">        titleLabel.setForeground(TEXT_COLOR);</span>
<span class="nc" id="L156">        titleLabel.setAlignmentX(Component.CENTER_ALIGNMENT);</span>
        
        // Descripci贸n
<span class="nc" id="L159">        JLabel descLabel = new JLabel(&quot;&lt;html&gt;&lt;center&gt;&quot; + description.replace(&quot;\\n&quot;, &quot;&lt;br&gt;&quot;) + &quot;&lt;/center&gt;&lt;/html&gt;&quot;, SwingConstants.CENTER);</span>
<span class="nc" id="L160">        descLabel.setFont(new Font(&quot;Segoe UI&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L161">        descLabel.setForeground(TEXT_COLOR);</span>
<span class="nc" id="L162">        descLabel.setAlignmentX(Component.CENTER_ALIGNMENT);</span>
        
        // Bot贸n
<span class="nc" id="L165">        JButton selectButton = new JButton(&quot;Seleccionar&quot;);</span>
<span class="nc" id="L166">        selectButton.setFont(new Font(&quot;Segoe UI&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L167">        selectButton.setBackground(ACCENT_COLOR);</span>
<span class="nc" id="L168">        selectButton.setForeground(Color.WHITE);</span>
<span class="nc" id="L169">        selectButton.setBorderPainted(false);</span>
<span class="nc" id="L170">        selectButton.setFocusPainted(false);</span>
<span class="nc" id="L171">        selectButton.setAlignmentX(Component.CENTER_ALIGNMENT);</span>
<span class="nc" id="L172">        selectButton.setMaximumSize(new Dimension(120, 35));</span>
<span class="nc" id="L173">        selectButton.addActionListener(e -&gt; action.run());</span>
        
        // Efectos hover
<span class="nc" id="L176">        card.addMouseListener(new java.awt.event.MouseAdapter() {</span>
            public void mouseEntered(java.awt.event.MouseEvent evt) {
<span class="nc" id="L178">                card.setBackground(new Color(248, 250, 252));</span>
<span class="nc" id="L179">                selectButton.setBackground(SUCCESS_COLOR);</span>
<span class="nc" id="L180">            }</span>
            public void mouseExited(java.awt.event.MouseEvent evt) {
<span class="nc" id="L182">                card.setBackground(CARD_COLOR);</span>
<span class="nc" id="L183">                selectButton.setBackground(ACCENT_COLOR);</span>
<span class="nc" id="L184">            }</span>
        });
        
        // Click en toda la tarjeta
<span class="nc" id="L188">        card.addMouseListener(new java.awt.event.MouseAdapter() {</span>
            public void mouseClicked(java.awt.event.MouseEvent evt) {
<span class="nc" id="L190">                action.run();</span>
<span class="nc" id="L191">            }</span>
        });
        
<span class="nc" id="L194">        card.add(iconLabel);</span>
<span class="nc" id="L195">        card.add(Box.createVerticalStrut(15));</span>
<span class="nc" id="L196">        card.add(titleLabel);</span>
<span class="nc" id="L197">        card.add(Box.createVerticalStrut(10));</span>
<span class="nc" id="L198">        card.add(descLabel);</span>
<span class="nc" id="L199">        card.add(Box.createVerticalStrut(20));</span>
<span class="nc" id="L200">        card.add(selectButton);</span>
        
<span class="nc" id="L202">        return card;</span>
    }
    
    /**
     * Crea el panel del footer.
     */
    private JPanel createFooter() {
<span class="nc" id="L209">        JPanel footer = new JPanel(new FlowLayout(FlowLayout.CENTER));</span>
<span class="nc" id="L210">        footer.setBackground(BACKGROUND_COLOR);</span>
<span class="nc" id="L211">        footer.setBorder(BorderFactory.createEmptyBorder(10, 0, 20, 0));</span>
        
<span class="nc" id="L213">        JLabel infoLabel = new JLabel(&quot;Arquitectura: MVC + SOLID | Patrones: Command, Memento, Builder, Singleton&quot;);</span>
<span class="nc" id="L214">        infoLabel.setFont(new Font(&quot;Segoe UI&quot;, Font.ITALIC, 11));</span>
<span class="nc" id="L215">        infoLabel.setForeground(new Color(120, 120, 120));</span>
        
<span class="nc" id="L217">        footer.add(infoLabel);</span>
<span class="nc" id="L218">        return footer;</span>
    }
    
    /**
     * Configura el UI con Look and Feel moderno.
     */
    private void setupUI() {
        try {
<span class="nc bnc" id="L226" title="All 2 branches missed.">            for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {</span>
<span class="nc bnc" id="L227" title="All 4 branches missed.">                if (&quot;Windows&quot;.equals(info.getName()) || &quot;Nimbus&quot;.equals(info.getName())) {</span>
<span class="nc" id="L228">                    UIManager.setLookAndFeel(info.getClassName());</span>
<span class="nc" id="L229">                    SwingUtilities.updateComponentTreeUI(this);</span>
<span class="nc" id="L230">                    break;</span>
                }
            }
<span class="nc" id="L233">        } catch (Exception e) {</span>
<span class="nc" id="L234">            logger.warning(&quot;No se pudo establecer Look and Feel moderno: &quot; + e.getMessage());</span>
        }
<span class="nc" id="L236">    }</span>
    
    /**
     * Abre la interfaz tradicional.
     */
    private void abrirInterfazTradicional() {
<span class="nc" id="L242">        SwingUtilities.invokeLater(() -&gt; {</span>
            try {
                // Crear la vista tradicional
<span class="nc" id="L245">                VentanaPrincipal vista = new VentanaPrincipal();</span>
                
                // Crear el controlador con inyecci贸n de dependencias
<span class="nc" id="L248">                new ControladorVentanaPrincipal(vista, modeloService, commandInvoker, gestorDisponibilidad);</span>
                
                // Mostrar la vista
<span class="nc" id="L251">                vista.setVisible(true);</span>
                
                // Cerrar ventana selector
<span class="nc" id="L254">                this.dispose();</span>
                
<span class="nc" id="L256">                logger.info(&quot;Interfaz tradicional iniciada exitosamente&quot;);</span>
                
<span class="nc" id="L258">            } catch (Exception e) {</span>
<span class="nc" id="L259">                logger.severe(&quot;Error iniciando interfaz tradicional: &quot; + e.getMessage());</span>
<span class="nc" id="L260">                JOptionPane.showMessageDialog(this, </span>
<span class="nc" id="L261">                    &quot;Error iniciando interfaz tradicional: &quot; + e.getMessage(),</span>
<span class="nc" id="L262">                    &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
            }
<span class="nc" id="L264">        });</span>
<span class="nc" id="L265">    }</span>
    
    /**
     * Abre la nueva interfaz de administraci贸n.
     */
    private void abrirInterfazAdmin() {
<span class="nc" id="L271">        SwingUtilities.invokeLater(() -&gt; {</span>
            try {
                // Crear la vista de administraci贸n
<span class="nc" id="L274">                VentanaAdmin vistaAdmin = new VentanaAdmin();</span>
                
                // Crear el controlador con inyecci贸n de dependencias
<span class="nc" id="L277">                ControladorVentanaAdmin controladorAdmin = new ControladorVentanaAdmin(</span>
<span class="nc" id="L278">                    vistaAdmin, modeloService, commandInvoker, gestorDisponibilidad);</span>
                
                // Conectar vista y controlador
<span class="nc" id="L281">                vistaAdmin.setControlador(controladorAdmin);</span>
                
                // Mostrar la vista
<span class="nc" id="L284">                vistaAdmin.setVisible(true);</span>
                
                // Cerrar ventana selector
<span class="nc" id="L287">                this.dispose();</span>
                
<span class="nc" id="L289">                logger.info(&quot;Panel de administraci贸n iniciado exitosamente&quot;);</span>
                
<span class="nc" id="L291">            } catch (Exception e) {</span>
<span class="nc" id="L292">                logger.severe(&quot;Error iniciando panel de administraci贸n: &quot; + e.getMessage());</span>
<span class="nc" id="L293">                JOptionPane.showMessageDialog(this, </span>
<span class="nc" id="L294">                    &quot;Error iniciando panel de administraci贸n: &quot; + e.getMessage(),</span>
<span class="nc" id="L295">                    &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
            }
<span class="nc" id="L297">        });</span>
<span class="nc" id="L298">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>