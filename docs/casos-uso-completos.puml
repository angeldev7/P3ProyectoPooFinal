@startuml
left to right direction
title Casos de Uso Completos - Gestión Hotelera (Actualizado)
skinparam actorStyle awesome
skinparam shadowing false
skinparam packageStyle rect
skinparam usecaseBackgroundColor #F8F9FA
skinparam usecaseBorderColor #555555
skinparam ArrowColor #555555

actor Admin as A
actor Recepcionista as R
actor "DB Mongo" as DB

package "Clientes" {
  usecase UC_Reg as "Registrar Cliente"
  usecase UC_Edit as "Editar Cliente"
  usecase UC_Del as "Eliminar Cliente"
  usecase UC_Find as "Buscar Cliente"
}
package "Habitaciones" {
  usecase UC_VerHab as "Ver Disponibilidad"
  usecase UC_RefHab as "Refrescar Estado"
}
package "Reservas" {
  usecase UC_Crear as "Crear Reserva (Planificación)"
  usecase UC_CheckinRap as "Check-in Rápido"
  usecase UC_Final as "Finalizar Reserva / Check-out"
  usecase UC_Anular as "Anular Reserva"
  usecase UC_List as "Listar Reservas"
  usecase UC_Ajustar as "Ajustar Planificación"
}
package "Servicios Habitación" {
  usecase UC_ListSrv as "Listar Servicios"
  usecase UC_AddSrv as "Agregar Servicio"
}
package "Reportes / Dashboard" {
  usecase UC_Dashboard as "Ver Dashboard"
  usecase UC_Reporte as "Generar Reporte Diario"
}
package "Historial" {
  usecase UC_Undo as "Deshacer"
  usecase UC_Redo as "Rehacer"
}
package "Mantenimiento" {
  usecase UC_Migrar as "Migrar IDs Legibles"
  usecase UC_Init as "Inicializar Habitaciones"
}

A --> UC_Reg
A --> UC_Edit
A --> UC_Del
A --> UC_Find
A --> UC_Crear
A --> UC_CheckinRap
A --> UC_Final
A --> UC_Anular
A --> UC_List
A --> UC_Ajustar
A --> UC_ListSrv
A --> UC_AddSrv
A --> UC_Dashboard
A --> UC_Reporte
A --> UC_Undo
A --> UC_Redo
A --> UC_Migrar
A --> UC_Init
A --> UC_VerHab
A --> UC_RefHab

R --> UC_Reg
R --> UC_Find
R --> UC_Crear
R --> UC_CheckinRap
R --> UC_Final
R --> UC_Anular
R --> UC_List
R --> UC_Ajustar
R --> UC_ListSrv
R --> UC_AddSrv
R --> UC_Dashboard
R --> UC_Undo
R --> UC_Redo
R --> UC_VerHab
R --> UC_RefHab

UC_Crear --> UC_VerHab : <<include>>
UC_CheckinRap --> UC_VerHab : <<include>>
UC_Final --> UC_List : <<include>>
UC_Anular --> UC_List : <<include>>
UC_Ajustar --> UC_List : <<include>>
UC_AddSrv --> UC_ListSrv : <<include>>
UC_Undo ..> UC_Crear : <<extend>>
UC_Undo ..> UC_Final : <<extend>>
UC_Undo ..> UC_Anular : <<extend>>
UC_Undo ..> UC_AddSrv : <<extend>>
UC_Redo --> UC_Undo : <<include>>
UC_Migrar ..> UC_Reg : <<extend>>
UC_Init ..> UC_VerHab : <<extend>>

DB <-- UC_Reg
DB <-- UC_Crear
DB <-- UC_CheckinRap
DB <-- UC_Final
DB <-- UC_Anular
DB <-- UC_AddSrv
DB <-- UC_Migrar
DB <-- UC_Init

note bottom of UC_Crear
Reserva planificada:
no ocupa habitación
hasta Check-in
end note
note right of UC_AddSrv
Sólo con reserva activa
end note

legend left
Clientes|Habitaciones|Reservas|Servicios|Reportes|Historial|Mantenimiento
endlegend
@enduml
